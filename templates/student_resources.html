{% extends "base.html" %}

{% block content %}
<div class="w3-container" style="padding-bottom: 32px;">
    <div class="w3-card w3-round w3-white">
        <!-- Header Section -->
        <div class="w3-container w3-padding" style="border-bottom: 1px solid #f0f0f0;">
            <p class="w3-text-grey">Download learning resources provided by your instructors.</p>
        </div>
        <div class="w3-container w3-padding">
            <div class="w3-padding">
                {% if resources %}
                <div class="w3-row-padding">
                    {% for resource in resources %}
                    <div class="w3-col m4 w3-margin-bottom">
                        <div class="w3-card w3-round w3-white w3-hover-shadow" style="height: 100%;">
                            <div class="w3-container w3-padding" style="border-left: 4px solid var(--secondary-color);">
                                <div style="display: flex; justify-content: space-between;">
                                    <h4 style="margin: 0; color: var(--primary-color);">{{ resource.title }}</h4>
                                    <span class="w3-tag w3-round w3-small" style="background-color: #f5f5f5; color: var(--primary-color);">
                                        {{ resource.uploaded_at.strftime('%b %d, %Y') }}
                                    </span>
                                </div>
                                <p class="w3-text-grey" style="margin: 8px 0 12px 0;">
                                    <i class="material-icons" style="vertical-align: middle; font-size: 14px;">description</i>
                                    {{ resource.description|default('No description', true) }}
                                </p>
                                <p>
                                    <i class="material-icons" style="vertical-align: middle; font-size: 14px;">insert_drive_file</i>
                                    <small class="w3-text-grey">{{ resource.filename }}</small>
                                </p>
                            </div>
                            <div class="w3-container w3-padding w3-light-grey w3-round-bottom">
                                <a href="{{ url_for('download_resource', resource_id=resource.id) }}" 
                                   class="w3-button w3-round w3-small" style="float: right;background-color: #FFDE91;" download>
                                    <i class="material-icons" style="vertical-align: middle; font-size: 14px;">file_download</i>
                                    Download
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="w3-center w3-padding-32">
                    <i class="material-icons w3-text-grey" style="font-size: 48px;">folder_off</i>
                    <p class="w3-text-grey">No resources have been added yet</p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}